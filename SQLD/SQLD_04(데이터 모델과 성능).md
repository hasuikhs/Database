# SQLD_04(데이터 모델과 성능)

## 1. 성능 데이터 모델링의 개요

### 1.1 성능 데이터 모델링의 정의

- 데이터의 용량이 커질수록, 기업의 의사결정의 속도가 빨라질수록 데이터의 처리 속도는 빨라야할 필요가 있음
- SQL 구문이 잘못 구성되어 성능 저하가 발생 가능하지만 근본적인 디자인이 잘못되었을 수도 있음
- 성능 저하(특히 데이터 조회 부분)되는 데이터 모델의 세가지 경우
  - 데이터 모델 구조에 의한 성능 저하
  - 데이터가 대용량이 됨으로 인한 불가피한 성능 저하
  - 인덱스 특성을 충분히 고려하지 않고 인덱스를 생성함으로 인한 성능 저하
- **성능 데이터 모델링이란 DB 성능 향상을 목적으로 설계 단계의 데이터 모델링 때부터 성능과 관련된 사항이 데이터 모델링에 반영될 수 있도록 하는 것**

### 1.2 성능 데이터 모델링 수행 시점

- 성능 향상을 위한 비용은 프로젝트 수행 사전에 할수록 비용이 적음(특히 분석/설계 단계)

![image-20200505213850875](SQLD_04(데이터 모델과 성능).assets/image-20200505213850875.png)

- 분석/설계 단계에서 DB 처리 성능을 향상시킬 수 있는 방법을 고려
- 프로젝트 초기에 운영환경에 대비한 테스트 환경을 구현하고 그곳에 트랜잭션을 발생시켜 ㅅ리제 성능을 테스트
- 이 때 데이터 구조도 변경하면서 어떠한 구조가 해당 사이트에 성능상 가장 적절한 구조인지를 검토하여 성능이 좋은 모습으로 디자인하는 전략이 요구

### 1.3 성능 데이터 모델링 고려사항

- 성능 데이터 모델 프로세스
  1. 데이터 모델링을 할 때 정규화를 정확하게 수행
     - 정규화된 모델이 데이터를 주요 관심사별로 분산시키는 효과로 그 자체 성능 향상
  2. DB 용량 산정을 수행
     - 용량 산정을 수행하면 어떤 테이블에 데이터가 집중되는지 파악 가능
  3. DB에 발생되는 트랜잭션의 유형 파악
     - CRUD 매트릭스를 보고 파악하는 것도 좋은 방법
     - 객체지향 모델링을 적용한다면 시퀀스 다이어그램을 보면 트랜잭션의 유형을 파악하기에 용이
     - 화면에서 처리된 데이터의 종류들을 보면 이벤트(CRUD)에 따라 테이블에 데이터가 어떻게 처리되는지를 유추 가능
     - 트랜잭션의 유형을 파악 시 SQL문장의 조인관계 테이블에서 데이터 조회의 칼럼들을 파악할 수 있게 되어 그에 따라 성능을 고려한 데이터 모델 설계 가능
  4. 용량과 트랜잭션의 유형에 따라 반정규화 수행
     - 반정규화는 테이블, 속성, 관계에 대해 포괄적인 반정규화의 방법을 적용
  5. 이력모델의 조정, PK/FK 조정, 슈퍼타입/서브타입 조정 등을 수행
     - 대량 데이터가 처리되는 이력모델에 대해 성능고려
     - PK/FK의 순서가 인덱스 특성에 따라 성능에 영향을 미치는 영향도가 크기에 반드시 PK/FK를 성능이 우수한 순서대로 칼럼의 순서를 조정
  6. 성능 관점에서 데이터 모델 검증
     - 데이터 모델 검토를 통해 다시 한 번 확인
     - 데이터 모델 규칙만을 검증하지 말고 충분하게 성능이 고려되었는지를 체크리스트에 포함하여 검증

## 2. 정규화와 성능

### 2.1 정규화를 통한 성능 향상 전략

- 정규화를 수행한다는 것은 데이터를 결정하는 결정자에 의해 함수적 종속을 가지고 있는 일반 속성을 의존자로 하여 입력/수정/삭제 이상을 제거
- 데이터 중복 속성을 제거하고 결정자에 의해 동일한 의미의 일반 속성이 하나의 테이블로 집약되므로 한 테이블의 데이터 용량이 최소화되는 효과
- 따라서 정규화된 테이블은 데이터를 처리할 때 속도가 빨라질 수도 있고 느려질 수도 있는 특성 존재

### 2.2 함수적 종속성(Functional Dependency)에 근거한 정규화 수행 필요

- 함수적 종속성은 데이터들이 어떤 기준값에 의해 종속되는 현상을 지칭

- 함수의 종속성은 데이터가 가지고 있는 근본적인 속성으로 인식
- 정규화의 궁극적인 목적은 반복적인 데이터를 분리하고 각 데이터가 종속된 테이블에 적절하게(프로세스에 의해 데이터의 정합성이 지켜질 수 있어야 함) 배치되도록 하는 것
- 기본적으로 데이터는 속성 간의 함수종속성에 근거하여 정규화
- 프로젝트 수행에서 정규화는 선택사항이 아니라 필수사항
- 정규화 이론은 건축으로 따지면 기본적인 설계 원칙만큼이나 중요한 이론
- 프로젝트에서 정규화가 적용된 모델을 설계하기 위해서는 정규화에 대한 기본이론을 정확하고 구체적으로 이해해야 함
- 전문적인 IT프로젝트를 진행하는 설계자가 정규화의 이론을 모르고 데이터 모델링을 설계하는 것은 불가능
- 정규화의 이론을 숙지하고 정보시스템의 근간인 데이터를 설계해야 함